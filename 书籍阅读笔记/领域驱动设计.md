### DDD 入门
- 领域模型
  - 通过对象模型来实现，这些对象同时包含了数据和行为，并且表达了准确的业务含义。
- 软件最大的问题便是业务人员和技术人员需要某种翻译才能交流
- 设计方式
  - 战略设计
  - 战术设计- DDD模型中的各个部件
- DDD好处
  - 领域专家与开发者一起工作，准确传达业务规则，知识的集中，创造一套适用于领域建模的通用语言
  - 设计就是代码，代码就是设计
  - 团队中只有“我们”这个概念
- 贫血对象
  - 花很多时间在对象和数据存储之间的映射上
  - 贫血症导致的失忆症
- DDD 两大支柱
  - 通用语言
  - 限界上下文
- 挑战
  - 大量时间创造领域语言
  - 改变开发者对领域的思考方式
### 领域，子域，限届上下文
#### 领域
- 一个组织所做的事情以及其中所包含的一切
- 领域模型把通用语言表达成软件模型
#### 子域
- 核心域
- 支撑子域
- 通用子域
### 限定上下文
- 显示的边界，领域模型便存在于这个边界内，主要用于封装通用语言与领域对象
- 边界内，所有术语和词组都有特定的含义，而模型需要准确的反应通用语言
- 并不仅限于模型，包括一个系统，一个应用程序
- 上下文才是王道
- 在一个好的限定上下文中，每一个术语应该仅表示一种领域概念
### 上下文映射图(todo)
- 不是企业架构，也不是系统拓扑图
### 架构
####  分层
![](https://i.loli.net/2019/07/08/5d234f946566624990.png)
- 严格分层
- 松散分层
- 应用服务
  - 与领域服务是不一样的
  - 领域逻辑不应该出现
  - 很轻量，用于安全认证与控制事务，协调领域对象操作
#### 六边形架构（端口与适配器）

![](https://i.loli.net/2019/07/08/5d2352cf3c0f588994.png)
#### CQRS
- 方法修改对象状态，这是一个命令，返回void
  - 资源库中只应该有add()/save()方法
- 如果一个方法返回数据，它不应该直接或者间接的修改对象的状态
  - 只有一个查询方法，fromId()
- 领域模型被一分为二，命令模型，查询模型
- 查询模型的更新，同步/异步，取决于系统的负荷
### 实体
- 实体应该包含意图/行为的方法
- 建模的一个方面便是发现对象的角色和职责
- 复杂的对象使用工厂
- 验证整个对象-延迟验证
- 对象组合的验证使用-领域服务
### 值对象
#### 特征
- 可以作为不变量
- 描述了领域的一件东西
- 可以被替换
- 可以做相等比较
- 尽量根据领域模型来设计数据模型
- 值对象是一个即廉价（可以被替换），又好用的（可以做相等，不变，描述领域的一件东西）东西（自己总结）
### 领域服务
- 当某个操作不适合放在聚合和值对象上时，最好的方式便是使用领域服务了。
- 显著的业务操作转换
- 对领域对象进行转换
- 以多个领域对象作为输入进行计算，然后产生一个值对象