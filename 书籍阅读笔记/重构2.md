**旧的不变，新的创建，一步切换，旧的再见**

**该笔记只会记录不熟悉的部分**
### 摘抄
- 早起重构的一般步骤：为原函数添加足够的结构，以便我能更好的理解它，看清它的逻辑结构
- 丑不丑陋，全在观者
- 函数的参数列表应该总结出该函数的可变性
- 继承这张牌只能打一次
### 代码坏味道
- 可变数据
- 发散式变化
  - 软件修改，只修改某一点
- 数据泥团
- 循环语句
  - 管道替代循环
- 夸夸其谈通用性
- 中间人
  - 过度委托
 ## 重构手法
- 引入解释性变量
### 搬离特性
尽量编写没有副作用的代码，任何有返回值的代码都不应该有副作用
- 元素的声明点和使用点互相靠近
- 拆分循环。一个循环只做一个事情
- 以管道替代循环
### 重新组织数据
- 拆分变量
  - 一个变量应该只被赋值一次
- 以查询替代派生变量
- 值对象与引用对象
  - 单例与多个实例，具体分析
### 简化条件逻辑
- 分解/合并条件表达式
- 引入特例
  - 一个数据结构的使用者都在检查某个特殊的值，并且在这个特殊的值出现时所做的处理也是一致的，把这些处理逻辑收拢到一处（新的类，新的方法，新的字段）
### 重构api
- 将查询函数和修改函数分离
- 函数参数化
  - 多个函数出了量值，都一样
- 以明确函数取代参数
   - 这个参数由函数自己获得也是同样容易的。减轻调用者负担
   - 没有不必要的依赖关系
- 以参数取代查询
  - 减少依赖关系
- 以命令取代函数/以函数取代命令
   - 新类去操作类的行为，factory,数据库层repo
### 处理继承关系
- 委托取代继承/委托取代超类
  - 这是另一个东西，我只是需要用到其中携带的一些功能
  - 先使用继承，如果出现问题，再修改