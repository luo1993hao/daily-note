## 分表
分表能够解决单表数据量过大带来的查询效率下降的问题，但是不能给数据库的并发访问带来质的提升
### 自定义分表策略
- 取模分表
- 时间纬度分表
- 自定义hash
- 缺点：代码改动大，取摸策略一旦变动，扩展性差
### 使用数据库的merge引擎
- 适用于
### mysql集群
缺点：单个表的数据量还是没有变，一次操作所花的时间还是那么多，硬件开销大。
## 分区
分区和分表相似，都是按照规则分解表。不同在于分表将大表分解为若干个独立的实体表，而分区是将数据分段划分在多个位置存放，可以是同一块磁盘也可以在不同的机器。分区后，表面上还是一张表，但数据散列到多个位置了。app读写的时候操作的还是大表名字，db自动去组织分区的数据。
### 分表分区差异

- 都能提高mysql的性高，在高并发状态下都有一个良好的表现。
- 分表和分区不矛盾，可以相互配合的，对于那些大访问量，并且表数据比较多的表，我们可以采取分表和分区结合的方式（如果merge这种分表方式，不能和分区配合的话，可以用其他的分表试），访问量不大，但是表数据很多的表，我们可以采取分区的方式等。
- 分表技术是比较麻烦的，需要手动去创建子表，app服务端读写时候需要计算子表名。采用merge好一些，但也要创建子表和配置子表间的union关系。
- 表分区相对于分表，操作方便，不需要创建子表。
## 分库
### 又分库又分表
中间变量 = 关键字%（数据库数量*单库数据表数量）

库 = 取整（中间变量/单库数据表数量）

表 = （中间变量%单库数据表数量）




INSERT INTO smart_box_flow_copy1 SELECT * FROM smart_box_flow




grant all privileges on 库名.表名 to 'root'@'*' identified by 'saeb9ieH' with grant option;




grant all on *.* to root@'%' identified by 'saeb9ieH' with grant option; 