#### 原则
1. 最左匹配原则（最重要）
 - mysql会一直向右匹配直到遇到范围查询（>、<、between、like）就停止匹配。比如a = 1 and b = 2 and c > 3 and d = 4，如果建立（a,b,c,d）顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。
2. 尽量选择区分度高的列最为索引
 - 区分度的公式是count(distinct col)/count(*)，表示字段不重复的比例，
 - 经过测试，区分度过低的索引无效
3. 索引列不能参与计算，保持列“干净”
4. 尽量的扩展索引，不要新建索引
#### 分类
- 普通索引
- 唯一索引
- 主键索引
- 组合索引
- 全文索引
#### 何时使用
- 主键，唯一字段
- 与其他表做连接的字段
- where里面使用＞，≥，＝，＜，≤，is null和between等字段
- order by 与group by字段
#### 何时不使用
 - 表记录太少
 - MySQL能估计出全表扫描比使用索引更快时，不使用索引；
 - 经常插入、删除、修改的表要减少索引；
 #### 索引何时失效
- 组合索引没有最左前缀
- 搜索一个索引却在另外一个索引上做order by
- or
- 如果是字符串，加上‘’
- 索引不是最原子的（例如使用了函数，!= not in 这种）
## explain
#### Extra
Using temporary：表示MySQL需要使用临时表来存储结果集，常见于排序和分组查询

Using filesort：MySQL中无法利用索引完成的排序操作称为“文件排序”
 
 **看到上述2个代表查询需要优化**